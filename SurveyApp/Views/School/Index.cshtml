@using System.Data;
@{
    ViewBag.Title = "School Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
    DataSet ds = SurveyApp.DataHelper.SchoolGetAll();
}

<script type="text/javascript">
    $(function () {
        $("#tblSchools").DataTable({ dom: 'Bfrtip', buttons: [{ extend: 'excel', text: "Export to Excel" }] });
    });
</script>
<div>
    <h2 class="col-sm-11" style="margin: 0px;padding: 0px;">School Management</h2>
    @Html.ActionLink("Add School", "SchoolAddEdit", "School", new object { }, new { @class = "btn btn-default", style = "float:right;" })
</div>
<div style="clear:both;"></div>
<br />
<style>
    .table-hover tbody tr{cursor:pointer;}
</style>
<table class="table table-striped table-hover" id="tblSchools">
    <thead>
        <tr>
            <th>Name</th>
            <th>Children</th>
            <th>Teachers</th>
            <th style="width: 50px;">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (System.Data.DataRow dr in ds.Tables[0].Rows)
        {
            <tr onclick="location.href = '@Url.Action("SchoolAddEdit", "School", new { id = dr["SchoolId"] })';">
                <td class="name">@dr["Name"]</td>
                <td>@dr["Children"]</td>
                <td>@dr["Teachers"]</td>
                <td style="text-align: center;vertical-align:middle;"><a href="javascript:void(0);" class="redCross" onclick="event.stopPropagation();deleteListItem(this, @dr["SchoolId"], 'school', '@dr["Name"]', function(){ location.href = location.href; });"></a></td>
            </tr>
        }
    </tbody>
</table>